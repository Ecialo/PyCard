<ControlButton@Widget>:
    size_hint_y: None
    height: dp(30)

<ClickableLabel@ButtonBehavior+Label>
<MyButton@ControlButton+Button>

<MyCheckBox@RelativeLayout+ControlButton+ButtonBehavior>:
    id: __layout
    active: __cb.active
    state: __cb.state
    text: 'Default text'

    CheckBox:
        id: __cb
        size_hint_x: None
        pos: (-35, 0)

    ClickableLabel:
        id: __label
        size_hint_x: None
        pos: (15, 0)

        text: __layout.text
        on_press: __cb._do_press()


<LobbyScreen@Screen>:
    BoxLayout:
        orientation: 'vertical'

        BoxLayout:
            id: top_view
            size_hint_y: 1
            orientation: 'horizontal'

            GridLayout:
                id: buttons_view
                cols: 3
                rows: 1

                MyCheckBox:
                    id: ready_checkbox
                    text: "I am ready"

                MyButton:
                    text: "Options"
                    disabled: True

                MyButton:
                    text: "Exit"
                    on_press: app.stop()

            # Филлер для того, чтобы кнопки прижимались влево
            BoxLayout:
                size_hint_y: 1

        ScrollView:
            id: chatlog_view
            size_hint_y: None
            height: min(0.3 * root.height, dp(160))

            canvas.before:
                Color:
                    rgb: 0.15, 0.15, 0.15
                Rectangle:
                    pos: self.pos
                    size: self.size

            Label:
                id: chatlog
                halign: 'left'
                valign: 'top'

                # add a 5px margin around the texture
                text_size: self.width - dp(10), None

                # make label scrollable
                size_hint_y: None
                height: self.texture_size[1]

        TextInput:
            id: input_field
            size_hint_y: None

            height: dp(self.font_size * 2)
            multiline: False
            on_text_validate: root.send_chat_message()
